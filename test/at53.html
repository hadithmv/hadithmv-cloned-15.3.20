<!DOCTYPE html>
<html lang="en">
    <head>
	<title>hadithmv.github.io</title>
	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<!-- === === EXTERNAL CSS === === -->
<!-- DT COMBINED CSS -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/se-2.2.13/jq-3.2.1/jq-3.2.1/jszip-2.5.0/dt-1.10.16/b-1.4.2/b-colvis-1.4.2/b-flash-1.4.2/b-html5-1.4.2/b-print-1.4.2/kt-2.3.2/r-2.2.0/sc-1.4.3/sl-1.2.3/datatables.min.css"/>

<!-- === EMBEDDED CSS === -->
<style type="text/css">

/* === === SCRIPT INSERTED CSS === === */
/* === FONT FACES === */
@font-face { font-family: NotoNaskhArabic;  src: url(https://fonts.gstatic.com/ea/notonaskharabic/v4/NotoNaskhArabic-Regular.woff); }

@font-face { font-family: MVAWaheed;  src: url(https://hadithmv.github.io/fonts/dv/mvawaheed-webfont.woff); }

/*hides table headers even on mobile*/
thead tr:nth-child(2) {
  position: absolute !important;
  top: -9999px !important;
  left: -9999px !important; }

/*fit search boxes within columns*/
thead input { width: 100%; }

/*vertically aligns column text to top*/
table.dataTable tbody td { vertical-align: top; }

/ bottom margin spacing between cells*/
.dataTable td { margin: 0 0 10px 0; padding: 0; }

.dataTable tbody { margin: 0; padding: 0; }
.dataTable { margin: 0; padding: 0; }

/* corrects display for these particular columns including print */
.dataTable tbody tr td:nth-child(1)  {
    text-align: center;
    font-weight: bold; }
.dataTable tbody tr td:nth-child(2)  {
    text-align: center; } 
.dataTable tbody tr td:nth-child(3)  {
    direction: rtl;
    text-align: justify; }
.dataTable tbody tr td:nth-child(4)  {
    direction: ltr;
    text-align: justify; }
.dataTable tbody tr td:nth-child(5)  {
    direction: rtl;
    text-align: justify;
    font-family: MVAWaheed; }

/* corrects display for these particular columns including print */
.dataTable tbody tr td.col_1 {
    text-align: center;
    font-weight: bold; }
.dataTable tbody tr td.col_2  {
    text-align: center; } 
.dataTable tbody tr td.col_3  {
    direction: rtl;
    text-align: justify;
    font-family: NotoNaskhArabic;
    font-weight: 500;
    font-size: 120%;
    line-height: 130%; }
.dataTable tbody tr td.col_4  {
    direction: ltr;
    text-align: justify; }
.dataTable tbody tr td.col_5  {
    direction: rtl;
    text-align: justify;
    font-family: MVAWaheed;
    font-weight: 100;
    font-size: 115%;
    line-height: 125%; }

 /* === /SCRIPT INSERTED CSS === */
html { -webkit-text-size-adjust: 100%; }
body { margin: 0; padding: 0; }
table { width: 100%; margin: 0; padding: 0;  }
table,  th { text-align: center; }
tbody { width: 100%; margin: 0; padding: 0;  }
td { margin: 0; padding: 0;  }
th { width; 100%; margin: 0; padding: 0;  }
tr { width: 100%; margin: 0; padding: 0;  }

/* == NOT IN USE == */
h1 { margin: 0 0 0px 0;  font-size: 20px;  color: black;  }

h2 { font-weight: normal;  color: #666;  font-size: 14px;  margin: 0 0 0px 0; }

.footnotes { margin-bottom: 20px; }

.footnotes h4 { margin: 0px 0 0px 0;  color: #666;  font-size: 0px;  }

.footnotes p,  .footer p { margin: 0px 0 0 0; font-size: 0px;  line-height: 1.3;  color: #808080;  }

a,  a:link,  a:visited {  color: #4774CC;  text-decoration: none;  }

a:hover,  a:active { opacity: 0.7; }

/* make odd rows lightblue */
.table-striped > tbody > tr:nth-child(odd) > td {
background-color: #f4f7ff; }
/* == /NOT IN USE == */
</style> <!-- ===  /EMBEDDED CSS === -->
    </head>
        <body>

	<div class="row">
		<div class="col-xs-12">
			<h1></h1>
			<p></p>

		</div>
	</div>

	<div class="row">
		<div class="col-xs-12">
			<div id="ninsert"></div>
		</div>
	</div>

	<div class="row">
		<div class="col-xs-12">
			<div class="footnotes">
				<h4></h4>
				<p></p>
			</div>
		</div>

		<div class="col-xs-12">
			<div class="footer">
				<p></a>
				</p>
				<p></p>
			</div>
		</div>

	</div>

<!-- === === JS === === -->
<!-- TableTop JS -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.2/tabletop.min.js"></script>

<!-- DT COMBINED JS -->
<script type="text/javascript" src="https://cdn.datatables.net/v/se-2.2.13/jq-3.2.1/jq-3.2.1/jszip-2.5.0/dt-1.10.16/b-1.4.2/b-colvis-1.4.2/b-flash-1.4.2/b-html5-1.4.2/b-print-1.4.2/kt-2.3.2/r-2.2.0/sc-1.4.3/sl-1.2.3/datatables.min.js"></script>

<!-- MARK JS -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.0/jquery.mark.min.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/datatables.mark.js/2.0.0/datatables.mark.min.js"></script>

<!-- CUSTOM JS -->
<script>
//google sheets key
var key =
  "https://docs.google.com/spreadsheets/d/1If9RREmbEsXbp-LikCSCDfrfk0CUkEGVEp5XdyrhYUs/pubhtml?gid=489792061&single=true";

//"data" refers to the sheets column name, no spaces,capitals, punctuation, numbers
//"title" is rendered column header text

var columns = [ {"data":"no",     "title":"No."},
                {"data":"ref",    "title":"Ref:"},
                {"data":"arabic", "title":"Arabic"},
                {"data":"english","title":"English"},
                {"data":"dhivehi","title":"Dhivehi"}
              ];

$(document).ready(function() {

  function initializeTabletopObject() {
    Tabletop.init({
      key: key,
      callback: function(data, tabletop) {
          //call up datatables function
          writeTable(data); },
      simpleSheet: true,
       debug: false
                 });
  }

  initializeTabletopObject();

  function writeTable(data) {
    
    //select main div and insert table into html
     $('#ninsert').html(
      '<table cellpadding="0" cellspacing="0" border="0" class="ui very basic small striped table table-condensed table-responsive" id="mySelection"></table>'
    ); //End of table insert
      
     // Add header to table
  $("#mySelection").append('<thead><tr><th>No.</th><th>Ref.</th><th>Arabic</th><th>English</th><th>Dhivehi</th></tr><tr><th>No.</th><th>Ref.</th><th>Arabic</th><th>English</th><th>Dhivehi</th></tr></thead>'); //End of add header
    
    
    //Accent neutralize
$.fn.DataTable.ext.type.search.string = function ( data ) {
    return ! data ?
        '' :
        typeof data === 'string' ?
            data
                .replace( /([^\u0621-\u063A\u0641-\u064A\u0660-\u0669 a-zA-Z 0-9 \u0780-\u07BF ])/g, '')
                .replace(/(آ|إ|أ)/g, 'ا')
                .replace(/(ة)/g, 'ه')
                .replace(/(ئ|ؤ)/g, 'ء')
                .replace(/(ى)/g, 'ي')
                .replace( /έ/g, 'ε' )
                .replace( /[ύϋΰ]/g, 'υ' )
                .replace( /ό/g, 'ο' )
                .replace( /ώ/g, 'ω' )
                .replace( /ά/g, 'α' )
                .replace( /[ίϊΐ]/g, 'ι' )
                .replace( /ή/g, 'η' )
                .replace( /\n/g, ' ' )
                .replace( /á/g, 'a' )
                .replace( /é/g, 'e' )
                .replace( /í/g, 'i' )
                .replace( /ó/g, 'o' )
                .replace( /ú/g, 'u' )
                .replace( /ê/g, 'e' )
                .replace( /î/g, 'i' )
                .replace( /ô/g, 'o' )
                .replace( /è/g, 'e' )
                .replace( /ï/g, 'i' )
                .replace( /ü/g, 'u' )
                .replace( /ã/g, 'a' )
                .replace( /õ/g, 'o' )
                .replace( /ç/g, 'c' )
                .replace( /ì/g, 'i' ) :
            data;
};
//End of Accent neutralize


    //initialize the DataTable object and put settings in
     table=$("#mySelection").DataTable({
      "stateSave": false, //restore table state on page reload
      "orderCellsTop": false, //Moves the sorting icons to the first header row
      "mark": true, //highlights searches
      "autoWidth": false,
      "data": data,
      "columns": columns,
      "order": [[0, "asc"]], //display order on column
      "pagingType": "full_numbers",
      "lengthMenu": [ 1, 2, 3, 5, 10 ], //display range of pages
      "language": {"search": "Search hadithmv.github.io  "},
       
      "columnDefs": [ { className: "col_1", "targets": [0] }, //classes columns for css
                      { className: "col_2", "targets": [1] },
                      { className: "col_3", "targets": [2] },
                      { className: "col_4", "targets": [3] }, 
                      { className: "col_5", "targets": [4] },
                      
                    ], //end of columnDefs
      
      "buttons": [
                  {extend: 'copy',
                   text: '&#x1f4cb;',
                   messageTop: '40 Nawawi',
                   title: 'hadithmv.github.io',
                   customize: function( data ) {
                                                //console.log(JSON.stringify(data));
 // == code to manipulate the data string as desired
      
      //string to remove the headers
      removeHeaders = '\n';
      
      //string containing regex substitutions ($1, $2, etc) for the headers
      subst = '';
      
      //string containing search for column data  - \t(.*)
      substRe = '\n';
      
      count = 1;
      
      for (col in columns) {
      	
        //append column header + \t
        removeHeaders = removeHeaders + columns[col].title + '\t';
        
        //append column header + susbstitution parameter
        subst = subst + columns[col].title + ': ' + '$' + count.toString() + '\n';
        count += 1;
        
        //append column search
        substRe = substRe + '(.*)\t'
      }
      
      //remove trailing \t
      removeHeaders = removeHeaders.replace(/\t$/, '');
      //removeHeaders = \nCompany\tClaims\tTotal Awarded
      //console.log(JSON.stringify(removeHeaders));
      
      //append newline to end of each row. $ is column
    //  subst += '\n';  //generic
      subst = 'Hadith No: $1\n\nReference: $2\n\n$3\n\n$4\n\n$5\n\n';
      //console.log(JSON.stringify(subst));
      
      //remove trailing \t
      substRe = substRe.replace(/\t$/, '');
      //substRe = \n(.*)\t(.*)\t(.*)
      //console.log(JSON.stringify(substRe));
      
      //construct remove headers regex
      re = RegExp(removeHeaders);
      //remove the headers and replace with newline
      data = data.replace(re, '\n');
      
      //construct substitution regex with global search option 
      re = RegExp(substRe, 'g');
      //search and replace with substitution of header names
      data = data.replace(re, subst);
                                       return data; },
 // === edits clipboard regex ===

                   exportOptions: {columns: [':visible'],
                                  rows: [':visible']   } //copies currently displayed columns and rows
                  }, //end of copy
                  {extend: 'excel',
                  text: '&#x1F4C4;',
                  exportOptions: {columns: [':visible'],
                                  rows: [':visible']   }
                  }, //end of excel
                  {extend: 'print',
                  text: '&#x1f5a8;',
                  exportOptions: {columns: [':visible'],
                                  rows: [':visible']   }
                  }, //end of print
                  {extend: 'colvis',
                  text: '&#x1f441;'} //end of colvis
                 ], //end of buttons
            
       //uncomment these options to simplify your table
        //"paging": false,
        //"searching": false,
        //"info": false
      
   }); //End of DataTable initialize
    
      // Setup - places the input (of each cell) in the first header row
    $('#mySelection thead tr:eq(0) th').each( function () {
        var title = $(this).text();
        $(this).html( '<input type="text" placeholder="Find by '+title+'" class="column_search" />' );
    }); //End of second row header input
      
      //Apply Buttons
      table.buttons().container()
        .appendTo( $('div.eight.column:eq(0)', table.table().container()) ); //End of buttons
    
      // Remove accented character from global search input 
      $('#mySelection_filter input').keyup( function () {
        table
          .search(
            $.fn.DataTable.ext.type.search.string( this.value )
          )
          .draw()
      } ); 
      // End of Remove accented characters from global search input
      
//Unstack Pagination
   $('.paginate_button, .pagination').removeClass('stackable').addClass('unstackable');
    

      //Apply the header individual column search event handler
    $( '#mySelection thead'  ).on( 'keyup', ".column_search",function () {
        table
            .column( $(this).parent().index() )
            .search(
            $.fn.DataTable.ext.type.search.string( this.value )
          )
            .draw();
          }); //End of individual column search handler
      
  }
});
//end of writeTable
</script>
    </body>
</html>
